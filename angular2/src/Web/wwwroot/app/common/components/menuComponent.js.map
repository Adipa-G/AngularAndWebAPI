{"version":3,"sources":["../../src/app/common/components/menuComponent.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAca,aAAa;gBAMtB,uBAAoB,MAAc,EACtB,WAAwB,EACxB,YAA0B;oBAFtC,iBAQC;oBARmB,WAAM,GAAN,MAAM,CAAQ;oBACtB,gBAAW,GAAX,WAAW,CAAa;oBACxB,iBAAY,GAAZ,YAAY,CAAc;oBAClC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;oBACrB,IAAI,CAAC,uBAAuB,GAAG,WAAW,CAAC,YAAY,CAAC,SAAS,CAAC,UAAA,IAAI,IAAI,OAAA,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAxB,CAAwB,CAAC,CAAC;oBACpG,IAAI,CAAC,qBAAqB,GAAG,YAAY,CAAC,iBAAiB,CAAC,SAAS,CAAC,UAAA,IAAI,IAAI,OAAA,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAtB,CAAsB,CAAC,CAAC;oBAEtG,IAAI,CAAC,WAAW,GAAG,IAAI,6CAAqB,EAAE,CAAC;gBACnD,CAAC;gBAEO,qCAAa,GAArB,UAAsB,IAA2B;oBAC7C,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;wBAC1C,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;4BACd,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;wBACxC,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACJ,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;wBACpC,CAAC;oBACL,CAAC;oBAED,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBAC5B,CAAC;gBAEO,mCAAW,GAAnB,UAAoB,SAAoB;oBACpC,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC;oBACjC,IAAI,CAAC,WAAW,GAAG,IAAI,6CAAqB,EAAE,CAAC;oBAC/C,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACrC,CAAC;gBAEM,8BAAM,GAAb;oBACI,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;gBAC9B,CAAC;gBAED,mCAAW,GAAX;oBACI,IAAI,CAAC,uBAAuB,CAAC,WAAW,EAAE,CAAC;oBAC3C,IAAI,CAAC,qBAAqB,CAAC,WAAW,EAAE,CAAC;gBAC7C,CAAC;gBACL,oBAAC;YAAD,CA1CA,AA0CC,IAAA;YA1CY,aAAa;gBALzB,gBAAS,CAAC;oBACP,QAAQ,EAAE,aAAa;oBACvB,WAAW,EAAE,4CAA4C;iBAC5D,CAAC;iDAQ8B,eAAM;oBACT,yBAAW;oBACV,2BAAY;eAR7B,aAAa,CA0CzB;;QAAA,CAAC","file":"menuComponent.js","sourcesContent":["import { Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { AuthenticationDetails } from '../../domain/auth/AuthenticationDetails';\r\nimport { ErrorInfo } from '../../domain/ErrorInfo';\r\n\r\nimport { ErrorService } from '../services/ErrorService';\r\nimport { AuthService } from '../services/AuthService';\r\n\r\n@Component({\r\n    selector: 'common-menu',\r\n    templateUrl: './app/common/components/menuComponent.html'\r\n})\r\n\r\nexport class MenuComponent {\r\n    private currentAuth: AuthenticationDetails;\r\n\r\n    private authChangedSubscription: any;\r\n    private authErrorSubscription: any;\r\n\r\n    constructor(private router: Router,\r\n        private authService: AuthService,\r\n        private errorService: ErrorService) {\r\n        this.router = router;\r\n        this.authChangedSubscription = authService.authChanged$.subscribe(auth => this.onAuthChanged(auth));\r\n        this.authErrorSubscription = errorService.authErrorOccured$.subscribe(auth => this.onAuthError(auth));\r\n\r\n        this.currentAuth = new AuthenticationDetails();\r\n    }\r\n\r\n    private onAuthChanged(auth: AuthenticationDetails): void {\r\n        if (this.currentAuth.isAuth !== auth.isAuth) {\r\n            if (auth.isAuth) {\r\n                this.router.navigate(['/userList']);\r\n            } else {\r\n                this.router.navigate(['/home']);\r\n            }\r\n        }\r\n\r\n        this.currentAuth = auth;\r\n    }\r\n\r\n    private onAuthError(errorInfo: ErrorInfo): void {\r\n        this.authService.clearAuthData();\r\n        this.currentAuth = new AuthenticationDetails();\r\n        this.router.navigate(['/login']);\r\n    }\r\n\r\n    public logOut(): void {\r\n        this.authService.logout();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.authChangedSubscription.unsubscribe();\r\n        this.authErrorSubscription.unsubscribe();\r\n    }\r\n}"],"sourceRoot":"/src"}