{"version":3,"sources":["../../src/app/admin/components/logMessagesComponent.ts"],"names":[],"mappings":"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","file":"logMessagesComponent.js","sourcesContent":["import { Component } from '@angular/core';\r\n\r\nimport { LogMessageFilter } from '../../domain/admin/LogMessageFilter';\r\nimport { LogMessageInfo } from '../../domain/admin/LogMessageInfo';\r\n\r\nimport { ErrorService } from '../../common/services/ErrorService';\r\nimport { UtilsService } from \"../../common/services/UtilsService\";\r\nimport { ServerLogService } from \"../services/ServerLogService\";\r\n\r\n@Component({\r\n    selector: 'log-messages',\r\n    templateUrl: './app/admin/components/logMessagesComponent.html'\r\n})\r\n\r\nexport class LogMessagesComponent {\r\n    private filter: LogMessageFilter;\r\n    private errorMessage: string;\r\n    private logLevels: string[];\r\n    private loggers: string[];\r\n    private logMessages: LogMessageInfo[];\r\n    private totalCount: number;\r\n\r\n    constructor(private errorService: ErrorService,\r\n        private serverLogService: ServerLogService,\r\n        private utilsService: UtilsService) {\r\n        this.errorService = errorService;\r\n        this.serverLogService = serverLogService;\r\n        this.utilsService = utilsService;\r\n        this.logLevels = [];\r\n        this.loggers = [];\r\n        this.logMessages = [];\r\n        this.totalCount = 0;\r\n\r\n        this.filter = this.initFilter();\r\n        this.initializeView();\r\n    }\r\n\r\n    private initializeView() {\r\n        this.serverLogService.getLogLevels().subscribe(\r\n            data => {\r\n                this.logLevels = data;\r\n            },\r\n            err => {\r\n                this.errorMessage = JSON.stringify(err);\r\n                this.errorService.handleHttpError(err);\r\n            });\r\n\r\n        this.serverLogService.getLoggers().subscribe(\r\n            data => {\r\n                this.loggers = data;\r\n            },\r\n            err => {\r\n                this.errorMessage = JSON.stringify(err);\r\n                this.errorService.handleHttpError(err);\r\n            });\r\n\r\n        this.updateView(this.filter);\r\n    }\r\n\r\n    private updateView(logMessageFilter: LogMessageFilter) {\r\n        this.filter = logMessageFilter;\r\n        this.filter.fromDate = this.utilsService.dateToUtcServerFormat(this.filter.fromDateLocal);\r\n        this.filter.toDate = this.utilsService.dateToUtcServerFormat(this.filter.toDateLocal);\r\n\r\n        this.serverLogService.getLogMessages(this.filter).subscribe(\r\n            data => {\r\n                this.logMessages = data.results;\r\n                this.totalCount = data.totalCount;\r\n            },\r\n            err => {\r\n                this.errorMessage = JSON.stringify(err);\r\n                this.errorService.handleHttpError(err);\r\n            });\r\n    }\r\n\r\n    private initFilter(): LogMessageFilter {\r\n        var logMessageFilter: LogMessageFilter = new LogMessageFilter();\r\n        logMessageFilter.orderField = 'LogTimestamp';\r\n        logMessageFilter.orderDirection = 'Desc';\r\n        logMessageFilter.pageNumber = 1;\r\n        logMessageFilter.pageSize = 100;\r\n        logMessageFilter.logLevel = '';\r\n        logMessageFilter.logger = '';\r\n        return logMessageFilter;\r\n    }\r\n}"],"sourceRoot":"/src"}